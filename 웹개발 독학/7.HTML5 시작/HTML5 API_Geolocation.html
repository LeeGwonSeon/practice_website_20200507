<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>드림왕자의 강의_HTML5 API</title>
</head>
<body>
   <h1>geolocation을 이용한 위도와 경도 찾기</h1>
   <button onclick="findLocation()">현재 위치의 위도와 경도</button>
   <p id="myLocation"></p>

   <script>
       var loc = document.getElementById("myLocation");
       function findLocation(){
           if (navigator.geolocation){
               navigator.geolocation.getCurrentPosition(showYourLocation);
           } else{
               loc.innerHTML = "이 문장은 사용자의 웹 브라우저가 Geolocation API를 지원하지 않을 때 나타납니다!";
           }
       }

       function showYourLocation(position){
           loc.innerHTML = "현재 사용자는 위도 " + position.coords.latitude + "경도"+ position.coords.longitude + "에 위치하고 있습니다.";
       }
   </script>
   <br><br><hr>

   <h1>geolocation에서의 오류 처리</h1>

   <button onclick="findLocation2()">현재 위치의 위도와 경도</button>
   <p id="myLocation2"></p>

   <script>
       var loc2 = document.getElementById("myLocation2");
       function findLocation2(){
           if(navigator.geolocation){
                navigator.geolocation.getCurrentPosition(showYourLocation2, showErrorMsg);
           } else {
               loc2.innerHTML = "이 문장은 사용자의 웹 브라우저가 Geolocation API를 지원하지 않을 때 나타납니다!";
           }
       }

       function showYourLocation2(position){
           loc2.innerHTML = "현재 사용자는 위도 " + position.coords.latitude + ", 경도 " + position.coords.longitude + "에 위치하고 있습니다.";
       }

       function showErrorMsg(error){
           switch(error.code){
                case error.PERMISSION_DENIED:
                loc2.innerHTML = "이 문장은 사용자가 Geolocation API의 사용 요청을 거부했을 때 나타납니다!"
				break;
				case error.POSITION_UNAVAILABLE:
				loc2.innerHTML = "이 문장은 가져온 위치 정보를 사용할 수 없을 때 나타납니다!"
				break;
				case error.TIMEOUT:
				loc2.innerHTML = "이 문장은 위치 정보를 가져오기 위한 요청이 허용 시간을 초과했을 때 나타납니다!"
				break;
				case error.UNKNOWN_ERROR:
				loc2.innerHTML = "이 문장은 알 수 없는 오류가 발생했을 때 나타납니다!"
				break;
           }
       }
   </script>
   <br><br><hr>

   <h1>구글 맵을 통한 사용자의 위치 표시</h1>

   <button onclick="findLocation3()">사용자의 위치 표시</button>
   <p id="myLocation3"></p>
   <div id="mapLocation"></div>

   <script>
       var loc3 = document.getElementById("myLocation3");
       function findLocation3(){
           if(navigator.geolocation){
                navigator.geolocation.getCurrentPosition(showYourLocation3, showErrorMsg2);
           }else{
               loc3.innerHTML = "이 문장은 사용자의 웹 브라우저가 Geolocation API를 지원하지 않을 때 나타납니다!";
			}
       }

       function showYourLocation3(position){
           var userLat = position.coords.latitude;
           var userLng = position.coords.longitude;
           var imgUrl = "http://maps.googleapis.com/maps/api/staticmap?center=" + userLat + "," + userLng + "&zoom=15&size=500x400&sensor=false";
           document.getElementById("mapLocation").innerHTML = "<img src='"+imgUrl+"'>";
       }

       function showErrorMsg2(error){
        switch(error.code) {
				case error.PERMISSION_DENIED:
				loc3.innerHTML = "이 문장은 사용자가 Geolocation API의 사용 요청을 거부했을 때 나타납니다!"
				break;
				case error.POSITION_UNAVAILABLE:
				loc3.innerHTML = "이 문장은 가져온 위치 정보를 사용할 수 없을 때 나타납니다!"
				break;
				case error.TIMEOUT:
				loc3.innerHTML = "이 문장은 위치 정보를 가져오기 위한 요청이 허용 시간을 초과했을 때 나타납니다!"
				break;
				case error.UNKNOWN_ERROR:
				loc3.innerHTML = "이 문장은 알 수 없는 오류가 발생했을 때 나타납니다!"
				break;
			}
       }
   </script>
   
</body>
</html>
</body>
</html>